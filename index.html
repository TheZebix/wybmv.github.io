<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine? üíï</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background: linear-gradient(135deg, #ffe4e9 0%, #ffd1dc 50%, #ffc2d1 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .handwriting {
            font-family: 'Dancing Script', cursive;
        }
        
        .kawaii-container {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 182, 193, 0.5);
            box-shadow: 
                0 10px 30px rgba(255, 182, 193, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        .btn-yes {
            background: linear-gradient(135deg, #ff9eb5 0%, #ff6b9d 100%);
            border: none;
            box-shadow: 
                0 4px 15px rgba(255, 107, 157, 0.4),
                0 2px 0 rgba(255, 255, 255, 0.3) inset;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-yes:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 8px 25px rgba(255, 107, 157, 0.5),
                0 2px 0 rgba(255, 255, 255, 0.3) inset;
        }
        
        .btn-yes:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .btn-no {
            background: linear-gradient(135deg, #ffc2d1 0%, #ffb3c6 100%);
            border: 2px solid #ff9eb5;
            color: #d63384;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .heart-particle {
            position: absolute;
            opacity: 0.6;
            animation: float 10s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
        }
        
        .celebration-text {
            animation: bounceIn 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .gif-container {
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(255, 182, 193, 0.4);
        }
        
        /* Secret admin link */
        .secret-link {
            position: fixed;
            bottom: 10px;
            right: 10px;
            opacity: 0.1;
            font-size: 10px;
            color: #d63384;
            cursor: pointer;
            transition: opacity 0.3s;
        }
        
        .secret-link:hover {
            opacity: 1;
        }
        
        /* Modal styles */
        .modal-overlay {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body class="flex items-center justify-center p-4 relative">
    
    <!-- Floating Background Hearts -->
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <!-- Main Container -->
    <main class="kawaii-container rounded-[40px] p-8 md:p-12 max-w-lg w-full text-center relative z-10 mx-auto">
        
        <!-- Cute GIF -->
        <div class="gif-container mb-8 mx-auto w-64 h-64 bg-pink-100 flex items-center justify-center relative">
            <img 
                src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbGtxdHRiM3Bhbm5qbGxrdXJ3Ym5mYjR2eWk4ZmpyY3F1ZGw2d3VmciZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/MDJ9IbxxvDUQM/giphy.gif" 
                alt="Cute kitten with hearts" 
                class="w-full h-full object-cover"
                id="mainGif"
            >
            <div class="absolute -top-2 -right-2 bg-white rounded-full p-2 shadow-lg">
                <i data-lucide="heart" class="w-6 h-6 text-pink-500 fill-pink-500 animate-pulse"></i>
            </div>
        </div>
        
        <!-- Headline -->
        <h1 class="handwriting text-5xl md:text-6xl text-pink-600 mb-8 drop-shadow-sm leading-tight">
            Will you be<br>my Valentine?
        </h1>
        
        <!-- Buttons Container -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center relative min-h-[120px]" id="buttonContainer">
            <button 
                id="yesBtn" 
                class="btn-yes text-white font-bold text-xl px-12 py-4 rounded-full min-w-[140px] tracking-wide"
            >
                YES üíï
            </button>
            
            <button 
                id="noBtn" 
                class="btn-no font-bold text-xl px-12 py-4 rounded-full min-w-[140px] tracking-wide cursor-pointer"
            >
                NO üíî
            </button>
        </div>
        
        <!-- Hidden Celebration Content -->
        <div id="celebration" class="hidden mt-8">
            <h2 class="handwriting text-4xl text-pink-600 mb-4 celebration-text">
                I knew it! üéâ
            </h2>
            <div class="flex justify-center gap-2 text-4xl animate-bounce">
                <span>üå∏</span>
                <span>üíù</span>
                <span>üå∏</span>
                <span>üíù</span>
                <span>üå∏</span>
            </div>
        </div>
    </main>
    
    <!-- Secret Admin Link -->
    <div class="secret-link" onclick="showStats()">
        View Responses üìä
    </div>
    
    <!-- Stats Modal -->
    <div id="statsModal" class="fixed inset-0 modal-overlay hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-[30px] p-8 max-w-md w-full shadow-2xl border-4 border-pink-200">
            <div class="flex justify-between items-center mb-6">
                <h3 class="handwriting text-3xl text-pink-600">Response Stats üíù</h3>
                <button onclick="closeStats()" class="text-pink-400 hover:text-pink-600">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            
            <div id="statsContent" class="space-y-3 max-h-64 overflow-y-auto">
                <p class="text-gray-500 text-center py-4">No responses yet...</p>
            </div>
            
            <div class="mt-6 pt-4 border-t border-pink-100">
                <p class="text-xs text-gray-400 mb-2">Webhook URL (for real-time notifications):</p>
                <input 
                    type="text" 
                    id="webhookUrl" 
                    placeholder="https://discord.com/api/webhooks/..." 
                    class="w-full px-4 py-2 rounded-xl border border-pink-200 text-sm focus:outline-none focus:border-pink-400"
                >
                <button onclick="saveWebhook()" class="mt-2 text-xs bg-pink-200 text-pink-700 px-3 py-1 rounded-lg hover:bg-pink-300 transition">
                    Save Webhook
                </button>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Create floating hearts background
        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            const colors = ['#ffb3c6', '#ffc2d1', '#ffd1dc', '#ffe4e9', '#ff9eb5'];
            
            for (let i = 0; i < 15; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-particle';
                heart.innerHTML = `<svg width="20" height="20" viewBox="0 0 24 24" fill="${colors[Math.floor(Math.random() * colors.length)]}"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 5 + 10) + 's';
                heart.style.animationDelay = Math.random() * 5 + 's';
                container.appendChild(heart);
            }
        }
        createFloatingHearts();
        
        // Response tracking
        const STORAGE_KEY = 'valentine_responses';
        const WEBHOOK_KEY = 'valentine_webhook';
        
        function getResponses() {
            const stored = localStorage.getItem(STORAGE_KEY);
            return stored ? JSON.parse(stored) : [];
        }
        
        function saveResponse(choice) {
            const responses = getResponses();
            const response = {
                choice: choice,
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                screen: `${window.screen.width}x${window.screen.height}`
            };
            responses.push(response);
            localStorage.setItem(STORAGE_KEY, JSON.stringify(responses));
            
            // Send to webhook if configured
            const webhookUrl = "https://discord.com/api/webhooks/1472279343349895390/f-bJH4D2WeiiXpD3Auv7R-UsCmuqUpaDNe42-L1565-7FX_f6RNlduI-ooAGbtA2Xjbj";
            if (webhookUrl) {
                sendToWebhook(response, webhookUrl);
            }
            
            return response;
        }
        
        function sendToWebhook(data, url) {
            const payload = {
                content: `üíå New Valentine Response!`,
                embeds: [{
                    title: data.choice === 'yes' ? 'üíñ YES! Someone said YES!' : 'üíî Someone said NO...',
                    description: `Time: ${new Date(data.timestamp).toLocaleString()}`,
                    color: data.choice === 'yes' ? 0xff69b4 : 0x808080,
                    fields: [
                        {
                            name: 'Device',
                            value: data.userAgent.split('(')[1]?.split(')')[0] || 'Unknown',
                            inline: true
                        },
                        {
                            name: 'Screen',
                            value: data.screen,
                            inline: true
                        }
                    ]
                }]
            };
            
            fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            }).catch(err => console.log('Webhook failed:', err));
        }
        
        // NO Button - Runaway behavior
        const noBtn = document.getElementById('noBtn');
        const container = document.getElementById('buttonContainer');
        let noClickAttempts = 0;
        
        function moveNoButton() {
            const containerRect = container.getBoundingClientRect();
            const btnRect = noBtn.getBoundingClientRect();
            
            // Calculate max positions within container bounds (with padding)
            const maxX = containerRect.width - btnRect.width - 10;
            const maxY = containerRect.height - btnRect.height - 10;
            
            // Generate random position
            const randomX = Math.random() * maxX;
            const randomY = Math.random() * maxY;
            
            noBtn.style.position = 'absolute';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';
            noBtn.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
            
            // Add cute sweat drop emoji occasionally
            if (Math.random() > 0.7) {
                noBtn.textContent = 'Are you sure?...';
                setTimeout(() => {
                    noBtn.textContent = 'NO üíî';
                }, 500);
            }
        }
        
        noBtn.addEventListener('mouseenter', moveNoButton);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveNoButton();
        });
        
        noBtn.addEventListener('click', () => {
            noClickAttempts++;
            saveResponse('no');
            
            // Easter egg: After 5 attempts, button says "Okay fine..."
            if (noClickAttempts >= 5) {
                noBtn.textContent = 'Okay... üíî';
                noBtn.style.background = '#ffe4e9';
            }
        });
        
        // YES Button - Celebration
        const yesBtn = document.getElementById('yesBtn');
        const celebration = document.getElementById('celebration');
        const mainGif = document.getElementById('mainGif');
        
        yesBtn.addEventListener('click', () => {
            // Save response
            saveResponse('yes');
            
            // Hide buttons
            yesBtn.style.display = 'none';
            noBtn.style.display = 'none';
            
            // Change GIF to celebration
            mainGif.src = 'https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExcWloMmJ1M3Nsam04dnt4ZjQ5Zmcyd3d2aWw0dWJzZmx3aHM4Z3J4YyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/3oriO0OEd9QIDdllqo/giphy.gif';
            
            // Show celebration
            celebration.classList.remove('hidden');
            
            // Confetti explosion
            const duration = 3000;
            const end = Date.now() + duration;
            
            (function frame() {
                confetti({
                    particleCount: 5,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#ff9eb5', '#ff6b9d', '#ffc2d1', '#ffd1dc']
                });
                confetti({
                    particleCount: 5,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#ff9eb5', '#ff6b9d', '#ffc2d1', '#ffd1dc']
                });
                
                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
            
            // Big burst in middle
            confetti({
                particleCount: 100,
                spread: 100,
                origin: { y: 0.6 },
                colors: ['#ff9eb5', '#ff6b9d', '#ffc2d1', '#ffd1dc', '#ffffff'],
                shapes: ['circle', 'heart']
            });
        });
        
        // Stats Modal Functions
        function showStats() {
            const modal = document.getElementById('statsModal');
            const content = document.getElementById('statsContent');
            const responses = getResponses();
            
            if (responses.length === 0) {
                content.innerHTML = '<p class="text-gray-500 text-center py-4">No responses yet... üí≠</p>';
            } else {
                const yesCount = responses.filter(r => r.choice === 'yes').length;
                const noCount = responses.filter(r => r.choice === 'no').length;
                
                let html = `
                    <div class="bg-pink-50 rounded-xl p-4 mb-4">
                        <div class="flex justify-between mb-2">
                            <span class="text-pink-600 font-bold">üíñ YES:</span>
                            <span class="text-pink-600 font-bold">${yesCount}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">üíî NO:</span>
                            <span class="text-gray-500">${noCount}</span>
                        </div>
                        <div class="mt-2 text-xs text-gray-400 text-center">
                            Total: ${responses.length} responses
                        </div>
                    </div>
                    <div class="space-y-2">
                `;
                
                responses.slice().reverse().forEach(r => {
                    const date = new Date(r.timestamp);
                    const timeStr = date.toLocaleTimeString();
                    const icon = r.choice === 'yes' ? 'üíñ' : 'üíî';
                    const color = r.choice === 'yes' ? 'text-pink-600' : 'text-gray-500';
                    html += `
                        <div class="flex justify-between items-center bg-gray-50 rounded-lg p-2 text-sm">
                            <span class="${color}">${icon} ${r.choice.toUpperCase()}</span>
                            <span class="text-gray-400 text-xs">${timeStr}</span>
                        </div>
                    `;
                });
                
                html += '</div>';
                content.innerHTML = html;
            }
            
            // Load saved webhook
            const savedWebhook = localStorage.getItem(WEBHOOK_KEY) || '';
            document.getElementById('webhookUrl').value = savedWebhook;
            
            modal.classList.remove('hidden');
        }
        
        function closeStats() {
            document.getElementById('statsModal').classList.add('hidden');
        }
        
        function saveWebhook() {
            const url = document.getElementById('webhookUrl').value.trim();
            if (url) {
                localStorage.setItem(WEBHOOK_KEY, url);
                alert('Webhook saved! You will now receive notifications when someone responds. üîî');
            } else {
                localStorage.removeItem(WEBHOOK_KEY);
                alert('Webhook removed.');
            }
        }
        
        // Close modal on outside click
        document.getElementById('statsModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) closeStats();
        });
        
        // Keyboard shortcut for stats (press 's' 3 times quickly)
        let sCount = 0;
        let sTimeout;
        document.addEventListener('keydown', (e) => {
            if (e.key === 's' || e.key === 'S') {
                sCount++;
                clearTimeout(sTimeout);
                sTimeout = setTimeout(() => sCount = 0, 1000);
                if (sCount >= 3) {
                    sCount = 0;
                    showStats();
                }
            }
        });
    </script>
</body>
</html>